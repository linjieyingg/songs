{% extends "base.html" %}
{% load static %}

{% block content %}
    <a href="{% url 'songs:song_list'%}" > Song List </a> <br/><br/>
    <span class="display-1 strong">{{ object.title }}</span> 
    {{object.release_date}} <br/>
    <audio controls>
        <source src={{object.preview_url}} type="audio/mp3">
    </audio>

     by <a href="{% url 'artists:artist_detail' artists.id %}"> {{artists.name}} </a><br/>
    
    {% if object.favorite == False %}
        <button type="button" class="btn btn-primary" id="{{object.api_id}}" onclick="change_favorite()">Add to favorites</button>
    {% else %}
        <button type="button" class="btn btn-primary" id="{{object.api_id}}" onclick="change_favorite()">Remove from favorites</button>
    {% endif %}

    {% comment %} {% for artist in artists%}
       hi {{artist.name}}
    {%endfor%} {% endcomment %}
    
{% endblock content %}

<script>
    {% block js %}
        function change_favorite() {
            var id = $(".btn btn-primary").id;
            var song = Song.objects.get(api_id=id);
            if (song.favorite == False) song.favorite = True;
            else song.favorite = False;
            song.save();
            alert("Favorites edited.");
        };
    {% endblock js %}
</script>